{{ define "main" }}
<article>
  <header class="mb-8">
    <h1 class="text-3xl font-bold mb-2">{{ .Title }}</h1>
    {{/* Show back link only for recommendation pages; route courses to their
    hub */}} {{ $.Scratch.Set "back" "" }} {{ if eq .Section "recommendations"
    }} {{ if and .CurrentSection (eq .CurrentSection.RelPermalink
    "/recommendations/courses/") }} {{ $.Scratch.Set "back"
    ("/recommendations/courses/" | relURL) }} {{ else }} {{ $.Scratch.Set "back"
    ("/recommendations/" | relURL) }} {{ end }} {{ end }} {{ $back :=
    $.Scratch.Get "back" }} {{ if $back }}
    <p class="mb-4"><a class="nav-link" href="{{ $back }}">‚Üê Back to all</a></p>
    {{ end }} {{ if .Params.link }}
    <a class="btn" href="{{ .Params.link }}" target="_blank" rel="noopener"
      >Visit Website</a
    >
    {{ end }}
    <div class="mt-3 flex flex-wrap gap-2">
      {{ range .Params.categories }}<a
        class="text-xs bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 px-2 py-1 rounded"
        href='{{ (printf "/categories/%s/" (urlize .)) | relURL }}'
        >{{ . }}</a
      >{{ end }} {{ range .Params.tags }}<a
        class="text-xs bg-slate-50 dark:bg-slate-900 text-slate-600 dark:text-slate-300 px-2 py-1 rounded border border-slate-200 dark:border-slate-800"
        href='{{ (printf "/tags/%s/" (urlize .)) | relURL }}'
        >#{{ . }}</a
      >{{ end }}
    </div>
  </header>

  {{/* Optional on-page Table of Contents for long articles */}} {{ $tocEnabled
  := cond (isset .Params "toc") (.Params.toc) true }} {{ if and $tocEnabled (ne
  .TableOfContents "") }}
  <nav class="mb-8 card" aria-label="Table of contents">
    <div class="card-body">
      <h2
        class="text-sm font-semibold uppercase tracking-wide text-slate-600 dark:text-slate-300 mb-2"
      >
        On this page
      </h2>
      <div class="toc">{{ .TableOfContents }}</div>
    </div>
  </nav>
  {{ end }}

  {{ partial "responsive-image.html" (dict
    "Page" .
    "Src" .Params.image
    "Alt" (printf "%s image" .Title)
    "Class" "w-full max-h-72 object-contain mb-6"
    "Sizes" "(max-width: 900px) 100vw, 800px"
    "Widths" (slice 320 480 640 800 1024)
    "FetchPriority" "low"
    "Loading" "lazy"
  ) }}

  <div class="prose prose-slate dark:prose-invert max-w-none">
    {{ .Content }}
  </div>
</article>
{{ end }}
