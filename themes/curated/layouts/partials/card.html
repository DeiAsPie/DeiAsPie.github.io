<article class="card">
  <a href="{{ .RelPermalink }}" class="block">
    {{ $img := .Params.image }}
    {{ if $img }}
    {{ if or (hasPrefix $img "http://") (hasPrefix $img "https://") }}
    <img class="card-img" src="{{ $img }}" alt="{{ $.Title }} logo" loading="lazy" />
    {{ else }}
    <img class="card-img" src="{{ $img | relURL }}" alt="{{ $.Title }} logo" loading="lazy" />
    {{ end }}
    {{ else }}
    {{ $resources := .Resources.ByType "image" }}
    {{ with first 1 $resources }}
    {{ $r := index . 0 }}
    <img class="card-img" src="{{ $r.RelPermalink }}" alt="{{ $.Title }} image" loading="lazy" />
    {{ else }}
    <div class="w-full h-40 p-4 flex items-center justify-center">
      {{ $t := .Title | default "?" }}
      {{ $ch := "?" }}
      {{ if gt (len $t) 0 }}
      {{ $ch = (slicestr $t 0 1) }}
      {{ end }}
      <svg class="w-full h-full rounded-md" viewBox="0 0 400 160" xmlns="http://www.w3.org/2000/svg" role="img"
        aria-label="{{ $t }}">
        <defs>
          <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
            <stop offset="0%" stop-color="#0f172a" />
            <stop offset="100%" stop-color="#334155" />
          </linearGradient>
        </defs>
        <rect width="400" height="160" fill="url(#g)" rx="12" />
        <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#e2e8f0" font-size="72"
          font-family="ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans">
          {{ $ch }}
        </text>
      </svg>
    </div>
    {{ end }}
    {{ end }}
    <div class="card-body">
      <h3 class="card-title">{{ .Title }}</h3>
      {{ if .Params.summary }}
      <p class="text-slate-600 dark:text-slate-300">{{ .Params.summary }}</p>
      {{ else if .Summary }}
      <p class="text-slate-600 dark:text-slate-300">{{ .Summary }}</p>
      {{ end }}
      <div class="mt-3 flex flex-wrap gap-2">
        {{ range .Params.categories }}<span
          class="text-xs bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 px-2 py-1 rounded">{{ . }}</span>{{ end }}
        {{ range .Params.tags }}<span
          class="text-xs bg-slate-50 dark:bg-slate-900 text-slate-600 dark:text-slate-300 px-2 py-1 rounded border border-slate-200 dark:border-slate-800">#{{
          . }}</span>{{ end }}
      </div>
    </div>
  </a>
</article>